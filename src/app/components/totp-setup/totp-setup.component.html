<p-card header="ðŸ” ConfiguraciÃ³n MFA (AutenticaciÃ³n en dos pasos)" styleClass="w-full max-w-lg mx-auto mt-5 shadow-3">
  <div class="p-fluid flex flex-column gap-3">

    <!-- BotÃ³n para generar el QR -->
    <button
      pButton
      type="button"
      label="ðŸ“· Generar CÃ³digo QR"
      class="p-button-primary w-full"
      icon="pi pi-qrcode"
      (click)="generarTOTP()"
    ></button>


    <!-- SecciÃ³n de QR generado -->
    <div *ngIf="qrImageSrc" class="mt-3 text-center">
      <p class="text-lg font-semibold">Escanea este cÃ³digo QR con tu app (Google Authenticator, Authy, etc):</p>
      <img [src]="qrImageSrc" alt="QR TOTP" class="border-round border-1 border-300 shadow-2 my-3" style="width: 200px; height: 200px;" />
    </div>

    <!-- VerificaciÃ³n del cÃ³digo -->
    <div *ngIf="qrImageSrc" class="p-fluid">
      <label for="verificar" class="font-medium">ðŸ”¢ CÃ³digo MFA</label>
      <input
        id="verificar"
        type="text"
        maxlength="6"
        pInputText
        [(ngModel)]="verifyingCode"
        placeholder="Ingresa el cÃ³digo de 6 dÃ­gitos"
        class="mt-1"
      />
      <button
        pButton
        type="button"
        label="Verificar CÃ³digo"
        icon="pi pi-check"
        class="p-button-success mt-2"
        (click)="verificarCodigo()"
      ></button>
    </div>

    <!-- Estado de la verificaciÃ³n -->
    <p
      class="mt-2 text-center text-lg font-medium"
      [ngClass]="{
        'text-green-600': verificationStatus.includes('âœ…'),
        'text-red-600': verificationStatus.includes('âŒ')
      }"
    >
      {{ verificationStatus }}
    </p>
  </div>
</p-card>
